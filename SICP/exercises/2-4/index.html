<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 6.3.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="format-detection" content="telephone=no"><title>2.4 Multiple Representations for Abstract Data - duinomaker&#39;s blog</title><meta name="description" content="Solutions to exercises in SICP section 2.4 - Multiple Representations for Abstract Data"><meta property="og:type" content="website"><meta property="og:title" content="2.4 Multiple Representations for Abstract Data"><meta property="og:url" content="https://duinomaker.top/SICP/exercises/2-4/"><meta property="og:site_name" content="duinomaker&#39;s blog"><meta property="og:description" content="Solutions to exercises in SICP section 2.4 - Multiple Representations for Abstract Data"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://duinomaker.top/images/og_image.png"><meta property="article:published_time" content="2020-05-04T14:41:46.000Z"><meta property="article:modified_time" content="2021-03-21T08:17:57.000Z"><meta property="article:author" content="duinomaker"><meta property="article:tag" content="mathematics"><meta property="article:tag" content="programming"><meta property="article:tag" content="algorithm"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://duinomaker.top/images/og_image.png"><meta name="twitter:creator" content="@duinomaker"><meta name="twitter:site" content="@duinomaker"><meta property="fb:admins" content="100043022235251"><link rel="canonical" href="https://duinomaker.top/SICP/exercises/2-4/"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="apple-touch-icon" type="image/png" sizes="57x57" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" type="image/png" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" type="image/png" sizes="72x72" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" type="image/png" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="icon" type="image/svg+xml" href="/images/favicon.svg"><link rel="alternate icon" type="image/png" href="/images/favicon.png"><link rel="shortcut icon" type="image/x-icon" sizes="32x32" href="/images/favicon-32x32.ico"><link rel="shortcut icon" type="image/x-icon" sizes="16x16" href="/images/favicon-16x16.ico"><link rel="preload" href="/assets/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="/assets/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@latest/css/bulma.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,italic,500,500italic|Source+Code+Pro|Alegreya:400,italic,500,500italic"><link rel="stylesheet" href="/assets/font-awesome/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@latest/styles/atom-one-light.min.css"><link rel="stylesheet" href="/assets/style.css"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"> <a class="navbar-item navbar-logo" href="/"><img src="/images/misc/logo.svg" alt="2.4 Multiple Representations for Abstract Data" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"> <a class="navbar-item" href="/">Home</a> <a class="navbar-item" href="/archives/">Archives</a> <a class="navbar-item" href="/categories/">Categories</a> <a class="navbar-item" href="/notes/">Notes</a> <a class="navbar-item" href="/about/">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;" rel="external nofollow noreferrer"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-12 has-order-2 column-main"><div class="card"><div class="card-content article"><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"> <time class="level-item has-text-grey" datetime="2020-05-04T14:41:46.000Z">May 04, 2020</time><span class="level-item has-text-grey"><i class="fas fa-user"></i> &nbsp;<a class="has-link-grey" rel="author" href="https://duinomaker.top/">duinomaker</a></span></div></div><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal serif"> 2.4 Multiple Representations for Abstract Data</h1><div class="content has-math serif"><style>strong{font-weight:500}</style><style>.article .content{font-size:1.2rem}</style><hr><h2 id="Exercise-2-73"><a href="#Exercise-2-73" class="headerlink" title="Exercise 2.73"></a>Exercise 2.73</h2><p>DrRacket as my interpreter, I added a few lines in the front to “implement” <code>put</code> and <code>get</code>&hairsp;, based on the built-in hash table structure.</p><pre><code>#lang racket
(define *the-table* (make-hash))
(define (put key1 key2 value) (hash-set! *the-table* (list key1 key2) value))
(define (get key1 key2) (hash-ref *the-table* (list key1 key2) #f))
</code></pre><p>a. That’s because numbers and variables are not tagged data.</p><p>b.</p><pre><code>(define (install-linear-package)
  (define (make-sum exp1 exp2)
    (cond ((=number? exp1 0) exp2)
          ((=number? exp2 0) exp1)
          ((and (number? exp1) (number? exp2)) (+ exp1 exp2))
          (else (list &#39;+ exp1 exp2))))
  (define (make-product exp1 exp2)
    (cond ((=number? exp1 1) exp2)
          ((=number? exp2 1) exp1)
          ((and (number? exp1) (number? exp2)) (* exp1 exp2))
          (else (list &#39;* exp1 exp2))))
  (define (deriv-addition operands var)
    (let ((addend (car operands))
          (augend (cadr operands)))
      (make-sum (deriv addend var) (deriv augend var))))
  (define (deriv-multiplication operands var)
    (let ((multiplier (car operands))
          (multiplicand (cadr operands)))
      (make-sum
       (make-product multiplier (deriv multiplicand var))
       (make-product (deriv multiplier var) multiplicand))))
  (put &#39;make &#39;+ make-sum)
  (put &#39;make &#39;* make-product)
  (put &#39;deriv &#39;+ deriv-addition)
  (put &#39;deriv &#39;* deriv-multiplication)
  &#39;done)

(define (=number? exp num)
  (and (number? exp) (= exp num)))
(define (variable? exp) (symbol? exp))
(define (same-variable? var1 var2)
  (and (variable? var1)
       (variable? var2)
       (eq? var1 var2)))
(define (operator exp) (car exp))
(define (operands exp) (cdr exp))

(define (deriv exp var)
  (cond ((number? exp) 0)
        ((variable? exp) (if (same-variable? exp var) 1 0))
        (else
         (let ((proc (get &#39;deriv (operator exp))))
           (if proc
               (proc (operands exp) var)
               (error &quot;invalid operator -- DERIV&quot; exp))))))

(install-linear-package)
</code></pre><p>c.</p><pre><code>(define (install-exponentiation-package)
  (define make-sum (get &#39;make &#39;+))
  (define make-product (get &#39;make &#39;*))
  (define (make-exponentiation exp1 exp2)
    (cond ((and (not (=number? exp1 0)) (=number? exp2 0)) 1)
          ((=number? exp2 1) exp1)
          (else (list &#39;** exp1 exp2))))
  (define (deriv-exponentiation operands var)
    (let ((base (car operands))
          (ex (cadr operands)))
      (make-product
       ex
       (make-exponentiation base (make-sum ex -1)))))
  (put &#39;make &#39;** make-exponentiation)
  (put &#39;deriv &#39;** deriv-exponentiation)
  &#39;done)

(install-exponentiation-package)
</code></pre><p>d. Arguments in every <code>put</code> call need to be reordered.</p><h2 id="Exercise-2-74"><a href="#Exercise-2-74" class="headerlink" title="Exercise 2.74"></a>Exercise 2.74</h2><p>Every company should provide their file in tagged-data form. Headquarters should implement</p><pre><code>(define (division file) ...)
(define (records file) ...)
</code></pre><p>to extract from the file its belonging division and the actual records it contains.</p><p>a.</p><pre><code>(define (get-record employee file)
  ((get &#39;employee-records-&gt;record (division file))
   employee (records file)))
</code></pre><p>b.</p><pre><code>(define (get-salary employee file)
  (let ((record (get-record employee file)))
    ((get &#39;record-&gt;salary (division file)) record)))
</code></pre><p>c.</p><pre><code>(define (find-employee-record employee files)
  (if (null? files)
      #f
      ((let ((record (get-record employee (car files))))
         (if record
             record
             (find-employee-record employee (cdr files)))))))
</code></pre><p>d. The new company should provide a package that includes <code>employee-records-&gt;record</code> and <code>record-&gt;salary</code> implementation.</p><h2 id="Exercise-2-75"><a href="#Exercise-2-75" class="headerlink" title="Exercise 2.75"></a>Exercise 2.75</h2><pre><code>(define (make-from-mag-ang r a)
  (define (dispatch op)
    (cond ((eq? op &#39;real-part) (* r (cos a)))
          ((eq? op &#39;imag-part) (* r (sin a)))
          ((eq? op &#39;magnitude) r)
          ((eq? op &#39;angle) a)
          (else
           (error &quot;invalid operation -- MAKE-FROM-MAG-ANG&quot; op))))
  dispatch)
</code></pre><h2 id="Exercise-2-76"><a href="#Exercise-2-76" class="headerlink" title="Exercise 2.76"></a>Exercise 2.76</h2><p>For generic operations with explicit dispatch, when you add a new type, you have to edit every existing operation; when you add a new operation, you have to create an operation that takes account of all types. This style is appropriate for a system in which new operations must often be added.</p><p>For message-passing, when you add a new type, you have to create a new “operation dispatcher” that does all operations; when you add a new operation, you have to edit every existing “operation dispatcher.” This style is appropriate for a system in which new types must often be added.</p><p>I placed data-directed style at last, because it actually eliminates the deficiencies above. In this style, operations are organized in a table. To add a new type, you can fill out a new column in the table, that is, create a package for that type, as what we’ve done in the book. To add a new operation, you can fill out a new row in the table, that is, create a package for that operation. Everything is additive no matter whether you’re adding a new type or a new operation.</p></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5 has-text-weight-normal">Comments</h3><div id="valine-thread" class="content"></div><script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><script>new Valine({el:"#valine-thread",notify:!1,verify:!1,app_id:"jUDJCYuOij3UzEzFmRpQer5U-gzGzoHsz",app_key:"h2AVOMeF8QsLYFdVVbbf9d7k",placeholder:"Suggestions are welcome.",lang:"en"})</script></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile has-mb-6-mobile"><p>This work is licensed under a <a rel="license noopener external nofollow noreferrer" title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons License</a></p></div><div class="level-end has-text-centered-mobile has-mb-5-mobile"><p class="is-size-7">&copy;&nbsp;2020<span style="padding-left:.06em">–</span>2023&nbsp;duinomaker<span>&nbsp;&nbsp;|&nbsp;&nbsp;</span><i class="fas fa-file-word"></i>&nbsp;57.5k&nbsp;words in total<span>&nbsp;&nbsp;|&nbsp;&nbsp;</span><a class="has-link-black-ter" rel="license noopener external nofollow noreferrer" title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><i class="fab fa-creative-commons"></i>&nbsp;&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;&nbsp;<i class="fab fa-creative-commons-nc"></i>&nbsp;&nbsp;<i class="fab fa-creative-commons-sa"></i></a></p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script>var IcarusThemeSettings={site:{url:"https://duinomaker.top",external_link:{enable:!0,exclude:[]}},article:{highlight:{clipboard:!1,fold:"unfolded"}}}</script><script src="/assets/main.js" defer="defer"></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/assets/content.json"}</script><script src="/assets/insight.js" defer="defer"></script><link rel="stylesheet" href="/assets/search.css"><link rel="stylesheet" href="/assets/insight.css"></body></html>